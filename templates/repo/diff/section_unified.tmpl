{{$file := .}}
{{$highlightClass := $file.GetHighlightClass}}
{{range $j, $section := $file.Sections}}
	{{range $k, $line := $section.Lines}}
	<tr>
		{{if eq .GetType 4}}
		<td colspan="3" class="lines-num {{DiffLineTypeToStr .GetType}}-code">
			{{/* {{if gt $j 0}}<span class="fold octicon octicon-fold"></span>{{end}} */}}
		</td>
		{{else}}
		<td class="lines-num {{DiffLineTypeToStr .GetType}}-code">
			<span rel="{{if $line.LeftIdx}}diff-{{Sha1 $file.Name}}L{{$line.LeftIdx}}{{end}}">{{if $line.LeftIdx}}{{$line.LeftIdx}}{{end}}</span>
		</td>
		<td class="lines-num {{DiffLineTypeToStr .GetType}}-code">
			<span rel="{{if $line.RightIdx}}diff-{{Sha1 $file.Name}}R{{$line.RightIdx}}{{end}}">{{if $line.RightIdx}}{{$line.RightIdx}}{{end}}</span>
		</td>
	</tr>
	{{end}}
{{end}}
<pre><code class="wrap {{if $highlightClass}}language-{{$highlightClass}}{{else}}nohighlight{{end}}">{{range $j, $section := $file.Sections}}{{range $k, $line := $section.Lines}}<div class="lines-code {{DiffLineTypeToStr .GetType}}-code">{{$section.GetComputedInlineDiffFor $line}}</div>{{end}}{{end}}</code></pre>
